# 占い診断アプリ 仕様書（README用）

## 概要

Google Apps Script（GAS）とHTML/CSS/JavaScriptを使って構築した「占い診断 by MIKI」は、ユーザーの氏名・生年月日・性別から運命を占うWebアプリです。姓名判断・九星気学・五行陰陽などの東洋占術をもとに構成されており、画数辞書の拡張によって日々精度向上を図っています。

## 使用技術

* Google Apps Script（バックエンド）
* HTML / Bootstrap（UI）
* JavaScript（クライアントロジック）
* flatpickr（カレンダーUI）
* スプレッドシート（データ記録）

## 入力項目

* 姓（例：山田）
* 名（例：花子）
* 生年月日（カレンダーUIで選択）
* 性別（女性／男性／その他）

## 主な機能

### 1. 名前・生年月日から占断

* 油井式姓名判断に基づく五格（天格・人格・地格・外格・総格）を自動計算
* 生年月日から九星・内面数（1～9）・五行陰陽バランスを算出
* 結果は診断コメントとして画面に表示

### 2. 未登録漢字への対応

* 辞書に登録されていない漢字があった場合はモーダルで画数入力を依頼
* 入力された画数はスプレッドシートの「unregistered\_kanji」シートに記録
* 入力完了後、再診断を自動再実行

### 3. スマホ対応

* Bootstrapとレスポンシブ設計により、スマホ表示にも最適化
* フォーム要素やボタンはタッチ操作しやすいサイズに調整済み

## スプレッドシート構成

* `unregistered_kanji`：未登録漢字の記録（日時／漢字／画数）
* ※今後、画数辞書メンテナンス用のマスタシートを追加予定

## 今後の展望

* 手動登録画数の自動反映（キャッシュ構造）
* 診断結果のPDF出力（GAS or PDF API）
* noteでの販売を前提としたテンプレート連携
* アプリ化（GASフロントからの脱却）

## 開発者向けメモ

* GASの `doGet()` 関数では `addMetaTag('viewport')` を利用してスマホ対応済み
* デプロイ時はURLが毎回変わるため、clasp による管理または「新しいバージョンの作成」後に「最新版に更新」がおすすめ

